<div id="header">
    <div id="title">
      <i nz-icon nzType="user" nzTheme="outline"></i>
      내부정산
    </div>
</div>
<div id="content">
<div id="main-table">
    <div class="table-menu">
            <button nz-button nzType="default" nzShape="circle" (click)="incamAddfareAdd()"><i title="추가" nz-icon nzType="plus"></i></button>
            <button nz-button nzType="default" nzShape="circle" (click)="incamAddfareUpdate()" [disabled]="selectedIncamAddfare.addfare_seq == undefined"><i nz-icon nzType="edit"></i></button>
            <button nz-button nzType="default" nzShape="circle" (click)="incamAddfareDelete()" [disabled]="selectedIncamAddfare.addfare_seq == undefined"><i nz-icon nzType="delete"></i></button>
          </div>
    <nz-table
      #incamAddfareTable
      nzShowSizeChanger
      nzNoResult = "조회된 결과가 없습니다"
      [nzFrontPagination]="false"
      [nzData]="incamAddfares.data"
      [nzLoading]="incamAddfareLoading"
      [nzTotal]="incamAddfares.totalPages * incamAddfares.size"
      [(nzPageIndex)]="incamAddfares.pageNumber"
      [(nzPageSize)]="incamAddfares.size"
      (nzPageIndexChange)="getIncamAddfares()"
      nzShowSizeChanger="false"
      nzSize="small">
      <thead>
        <tr>
          <th nzWidth="8%">번호</th>
          <th nzWidth="9%">정산일자</th>
          <th nzWidth="9%">원청사</th>
          <th nzWidth="9%">분반</th>
          <th nzWidth="9%">구분</th>
          <th nzWidth="9%">이름</th>
          <th nzWidth="9%">단가</th>
          <th nzWidth="9%">시수</th>
          <th nzWidth="9%">원천세</th>
          <th nzWidth="9%">소득타입</th>
          <th nzWidth="9%">송금</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of incamAddfareTable.data"
          (click)="selectIncamAddfare(data)"
          (dblclick)="incamAddfareUpdate()"
  
          [ngClass]="{
            'on':this.selectedIncamAddfare.addfare_seq === data.addfare_seq
          }"
          style="cursor: pointer;">
          <td>{{ data.addfare_seq }}</td>
          <td>{{ data.addfare_date }}</td>
          <td>{{ data.original_company }}</td>
          <td>{{ data.class }}</td>
          <td>{{ data.gubun }}</td>
          <td>{{ data.name }}</td>
          <td>{{ data.price }}</td>
          <td>{{ data.hour }}</td>
          <td>{{ data.tax }}</td>
          <td>{{ data.income_type }}</td>
          <td>{{ data.remit }}</td>
        </tr>
      </tbody>
    </nz-table>
    </div>
</div>
  
  <nz-modal [(nzVisible)]="isIncamAddfareAdd"
            nzTitle="내부정산 추가" 
            (nzOnCancel)="popupCancel()"
            (nzOnOk)="incamAddfareAddOk()"
            nzWidth="550">
    <div class="popup-content">
          <div>
              <input nz-input type="text" placeholder="정산일자" [(ngModel)]="popupIncamAddfare.addfare_date"/>
          </div>
          <div>
              <input nz-input type="text" placeholder="원청사" [(ngModel)]="popupIncamAddfare.original_company"/>
          </div>
          <div>
              <input nz-input type="text" placeholder="분반" [(ngModel)]="popupIncamAddfare.class"/>
          </div>
          <div>
              <nz-input-number [nzPlaceHolder]="'구분'" [nzStep]="1" [(ngModel)]="popupIncamAddfare.gubun" style="width:300px; margin-bottom: 5px;"></nz-input-number>
          </div>
          <div>
              <input nz-input type="text" placeholder="이름" [(ngModel)]="popupIncamAddfare.name"/>
          </div>
          <div>
              <nz-input-number [nzPlaceHolder]="'단가'" [nzStep]="1" [(ngModel)]="popupIncamAddfare.price" style="width:300px; margin-bottom: 5px;"></nz-input-number>
          </div>
          <div>
              <nz-input-number [nzPlaceHolder]="'시수'" [nzStep]="1" [(ngModel)]="popupIncamAddfare.hour" style="width:300px; margin-bottom: 5px;"></nz-input-number>
          </div>
          <div>
              <nz-input-number [nzPlaceHolder]="'원천세'" [nzStep]="1" [(ngModel)]="popupIncamAddfare.tax" style="width:300px; margin-bottom: 5px;"></nz-input-number>
          </div>
          <div>
              <nz-input-number [nzPlaceHolder]="'소득타입'" [nzStep]="1" [(ngModel)]="popupIncamAddfare.income_type" style="width:300px; margin-bottom: 5px;"></nz-input-number>
          </div>
          <div>
              <nz-input-number [nzPlaceHolder]="'송금'" [nzStep]="1" [(ngModel)]="popupIncamAddfare.remit" style="width:300px; margin-bottom: 5px;"></nz-input-number>
          </div>
    </div>
    <div *nzModalFooter>
        <button nz-button nzType="default" (click)="popupCancel()">취소</button>
        <button nz-button nzType="primary" (click)="incamAddfareAddOk()">등록</button>
      </div>
  </nz-modal>

  <nz-modal [(nzVisible)]="isIncamAddfareUpdate"
          nzTitle="내부정산수정" 
          (nzOnCancel)="popupCancel()"
          (nzOnOk)="incamAddfareUpdateOk()"
          nzWidth="350">
  <div class="popup-content">
    <div>
      <nz-input-number [nzPlaceHolder]="'번호'" [nzStep]="1" [(ngModel)]="popupIncamAddfare.addfare_seq" style="width:300px; margin-bottom: 5px;"></nz-input-number>
    </div>
    <div>
        <input nz-input type="text" placeholder="정산일자" [(ngModel)]="popupIncamAddfare.addfare_date"/>
    </div>
    <div>
        <input nz-input type="text" placeholder="원청사" [(ngModel)]="popupIncamAddfare.original_company"/>
    </div>
    <div>
        <input nz-input type="text" placeholder="분반" [(ngModel)]="popupIncamAddfare.class"/>
    </div>
    <div>
        <nz-input-number [nzPlaceHolder]="'구분'" [nzStep]="1" [(ngModel)]="popupIncamAddfare.gubun" style="width:300px; margin-bottom: 5px;"></nz-input-number>
    </div>
    <div>
        <input nz-input type="text" placeholder="이름" [(ngModel)]="popupIncamAddfare.name"/>
    </div>
    <div>
        <nz-input-number [nzPlaceHolder]="'단가'" [nzStep]="1" [(ngModel)]="popupIncamAddfare.price" style="width:300px; margin-bottom: 5px;"></nz-input-number>
    </div>
    <div>
        <nz-input-number [nzPlaceHolder]="'시수'" [nzStep]="1" [(ngModel)]="popupIncamAddfare.hour" style="width:300px; margin-bottom: 5px;"></nz-input-number>
    </div>
    <div>
        <nz-input-number [nzPlaceHolder]="'원천세'" [nzStep]="1" [(ngModel)]="popupIncamAddfare.tax" style="width:300px; margin-bottom: 5px;"></nz-input-number>
    </div>
    <div>
        <nz-input-number [nzPlaceHolder]="'소득타입'" [nzStep]="1" [(ngModel)]="popupIncamAddfare.income_type" style="width:300px; margin-bottom: 5px;"></nz-input-number>
    </div>
    <div>
        <nz-input-number [nzPlaceHolder]="'송금'" [nzStep]="1" [(ngModel)]="popupIncamAddfare.remit" style="width:300px; margin-bottom: 5px;"></nz-input-number>
    </div>
  </div>
  <div *nzModalFooter>
    <button nz-button nzType="default" (click)="popupCancel()">취소</button>
    <button nz-button nzType="primary" (click)="incamAddfareUpdateOk()">등록</button>
  </div>
</nz-modal>
